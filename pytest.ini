[pytest]
# Pytest 配置文件

# 测试路径
testpaths = tests

# 测试文件模式
python_files = test_*.py

# 测试函数模式
python_functions = test_*

# 测试类模式
python_classes = Test*

# 输出选项
addopts =
    # 详细输出
    -v
    # 显示测试覆盖率
    --cov=src
    # 覆盖率报告格式
    --cov-report=html
    --cov-report=term-missing
    # 失败时显示局部变量
    --showlocals
    # 显示测试用例摘要
    -ra
    # 严格标记模式
    --strict-markers
    # 警告配置
    -W ignore::DeprecationWarning

# 最小覆盖率要求（80%）
[coverage:run]
omit =
    */tests/*
    */conftest.py
    */__init__.py
    */migrations/*

[coverage:report]
precision = 2
show_missing = True
skip_covered = False

# 标记定义
markers =
    slow: 标记慢速测试
    integration: 标记集成测试
    unit: 标记单元测试
    asyncio: 标记异步测试
